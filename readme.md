# Телеграмм бот для запроса информации по отелям. Выполнен в рамках дипломного проекта школы Skillbox
## Описание
Проект состоит из скрипта main.py и Telegram-бота Hotels (Work_sunwait_bot).
Пользователь с помощью специальных команд бота может выполнить следующие
действия (получить следующую информацию):
1. Узнать топ самых дешёвых отелей в городе (команда /lowprice).
2. Узнать топ самых дорогих отелей в городе (команда /highprice).
3. Узнать топ отелей, наиболее подходящих по цене и расположению от центра
(самые дешёвые и находятся ближе всего к центру) (команда /bestdeal).
4. Узнать историю поиска отелей (команда /history)
Без запущенного скрипта бот на команды (и на что-либо ещё) не реагирует
## Парсинг 
Информация парсистся  с помощью открытый бесплатного API [Rapidapi.com]: https://rapidapi.com/apidojo/api/hotels4/

#### Бот выполнен с использованием библиотек pyTelegramBotAPI, ORM PEEWEE, MySQL. Все зависимости указаны в requirements.txt

## Файловый состав:
- main.py - основной скрипт , обрабатываются основные команды бота. С него запускается бот
- loader.py - скрипт, содержащий основные данные
- handlers.py - скрипт обрабатывает вспомогательные функции по работе с ботом, запрос даты и тд, а также выводит ответ
- rapidapi.py - скрипт для запроса  и обратки ответов 
- utils.py - скрипт для хранения класса Users. Основные данные в программе передаются в процедурах посмредством класса. 
- current.py - скрипт  для обработки и преобразования дат и строк
- Файлы для взаимодействия с БД. БД базируется на MYSQL. Для взаимодействия используется ОРМ Peewee. models.py - описание моделей БД, процедуры взаимодействия с данными БД: add_answer,add_history, find_answer, geo_city, history_answer, read_history
- history.mwb, city_bd_geo.sql - файлы с базами данных
- sample.log - журнал логирования функций

## БАЗА ДАННЫХ
Используется MySQL и ОРМ peewee. В основе 2 базы данных geo_city (содержит информацию о основных городах и странах мира,
скачана с просторов интернет), history (состоит из двух таблиц answer и history). History содежит всю информацию о запросах
 пользователей, Answer - хранит информацию об ответах

##### Многопользовательский режим поддерживается с помощью возможности класса Users